<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>MasterHack</title>

    <link rel="stylesheet" href="vnd/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="vnd/bootstrap/dist/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="css/main.css">
    <!--<link rel="stylesheet" href="css/home.css">-->
</head>

<body>


<script src="vnd/jquery/dist/jquery.min.js"></script>
<script src="https://sandbox.masterpass.com/lightbox/Switch/integration/MasterPass.client.js"></script>

<script>

console.log("Testing callback + external");
var xhr = new XMLHttpRequest();
xhr.open('POST', 'http://10.131.210.166:8080/masterpass/12', true);
xhr.onload = function () {
    var opts = JSON.parse(this.responseText);
    console.log(opts);
    //opts.requestExpressCheckout = true;
    opts.requestedDataTypes = "CARD";

    delete opts.callbackUrl;
    opts.failureCallback = function(data) {
        alert("Failure");
    };

    opts.successCallback = function(data) {
        console.log(data);
        alert("Success");
    };

    opts.cancelCallback = function(data) {
        alert("Cancel");
    };

    MasterPass.client.checkout(opts);
};
xhr.send('');


</script>

</body>
</html>